
import crack.ext._readline readline;
import crack.io cerr;
import crash createRootContext, eval;
import crack.runtime strlen;

void repl() {
    root := createRootContext();
    while (true) {
        raw := readline('$ '.buffer);
        if (raw is null)
            return;
        result := eval(String(raw, strlen(raw), true), root);
        cerr `$result\n`;
    }
}
