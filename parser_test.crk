import crack.io cout, FStr;
import .parser parseString;
@import crack.ann assert;

test := "echo 'hello world' { echo 'foo' }; echo 'goodbye'";
actual := FStr() `$(parseString(test))`;
expected := "echo 'hello world' {echo 'foo';};echo 'goodbye';";
@assert(actual == expected);
@assert(FStr() `$(parseString(expected))` == expected);

# Verify that names in an arg list parse as plain names.
@assert(FStr() `$(parseString("echo var1 var2 (command var3)"))\n` ==
        'echo var1 var2 (command var3;);'
        );

cout `ok\n`;
